{"version":3,"file":"5.e590e0aabe42200b974e.hot-update.js","sources":["webpack:///components/project/projectComponent/MembersTab.js","webpack:///components/project/projectComponent/MembersTap/AddMemberForm.js"],"sourcesContent":["import { withRouter } from \"next/router\";\nimport { Table, Icon, Divider, Radio, message } from \"antd\";\nimport { Query, Mutation } from \"react-apollo\";\nimport { getMembersByProjectId as GET_MEMBERS_BY_PROJECTS_ID } from \"../../../graphql/queries.gql\";\nimport { updateMemberRoleInProject as UPDATE_MEMBER_ROLE_IN_PROJECT } from \"../../../graphql/mutations.gql\";\nimport AddMemberForm from \"./MembersTap/AddMemberForm\";\n\nconst RadioButton = Radio.Button;\nconst RadioGroup = Radio.Group;\n\nfunction onChange(updateMemberRoleInProject, e, memberId) {\n  updateMemberRoleInProject({\n    variables: {\n      input: {\n        projectMemberId: memberId,\n        role: e.target.value\n      }\n    }\n  });\n  console.log(`radio checked:${e.target.value}`);\n}\n\nconst columns = [\n  {\n    title: \"Username\",\n    render: member => <a href=\"javascript:;\">{member.user.username}</a>\n  },\n  {\n    title: \"Email\",\n    render: member => <a href=\"javascript:;\">{member.user.email}</a>\n  },\n  {\n    title: \"Role\",\n    render: member => {\n      if (member.user.role === \"root_admin\") {\n        return <p>Root Admin</p>;\n      }\n      return (\n        <Mutation\n          mutation={UPDATE_MEMBER_ROLE_IN_PROJECT}\n          onCompleted={data => {\n            console.log(data);\n          }}\n          onError={error => {\n            // If you want to send error to external service?\n            error.graphQLErrors.map(({ message }, i) => {\n              message.error(message, 3);\n            });\n          }}\n        >\n          {(updateMemberRoleInProject, { loading, data, error }) => (\n            <RadioGroup\n              onChange={e => onChange(updateMemberRoleInProject, e, member.id)}\n              defaultValue={member.role}\n            >\n              <RadioButton value=\"member\">Member</RadioButton>\n              <RadioButton value=\"project_admin\">Project Admin</RadioButton>\n            </RadioGroup>\n          )}\n        </Mutation>\n      );\n    }\n  }\n];\n\nclass MembersTab extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        <AddMemberForm />\n        <Query\n          query={GET_MEMBERS_BY_PROJECTS_ID}\n          variables={{ projectId: this.props.router.query.id }}\n        >\n          {({ loading, error, data }) => {\n            if (loading) return \"Loading...\";\n            if (error) return `Error! ${error.message}`;\n            return (\n              <Table\n                columns={columns}\n                dataSource={data.projectMembers}\n                rowKey=\"id\"\n              />\n            );\n          }}\n        </Query>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withRouter(MembersTab);\n\n\n\n// WEBPACK FOOTER //\n// components/project/projectComponent/MembersTab.js","import { Form, Input, Select, Button } from \"antd\";\n\nconst FormItem = Form.Item;\nconst { Option } = Select;\nconst AddMemberForm = Form.create()(\n  class extends React.Component {\n    render() {\n      const { getFieldDecorator } = form;\n\n      return (\n        <Form layout=\"inline\">\n          <FormItem>\n            {getFieldDecorator(\"username\", {\n              rules: [\n                {\n                  required: true,\n                  message: \"Please input the username/member of user!\"\n                }\n              ]\n            })(<Input />)}\n          </FormItem>\n          <FormItem>\n            {getFieldDecorator(\"role\", {\n              initialValue: \"member\"\n            })(\n              <Select placeholder=\"Please select member's role\">\n                <Option key=\"member\">member</Option>\n                <Option key=\"admin\">admin</Option>\n              </Select>\n            )}\n          </FormItem>\n          <FormItem>\n            <Button type=\"primary\" htmlType=\"submit\">\n              Submit\n            </Button>\n          </FormItem>\n        </Form>\n      );\n    }\n  }\n);\n\nexport default AddMemberForm;\n\n\n\n// WEBPACK FOOTER //\n// components/project/projectComponent/MembersTap/AddMemberForm.js"],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA6CA;;AAoBA;;;;;;;;;AC/DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;;;;;A","sourceRoot":""}