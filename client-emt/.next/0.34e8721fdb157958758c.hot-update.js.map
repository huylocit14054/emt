{"version":3,"file":"0.34e8721fdb157958758c.hot-update.js","sources":["webpack:///components/topHeader.js"],"sourcesContent":["import { Layout, Menu, Icon, Dropdown, Avatar, List } from 'antd';\nimport { withApollo, ApolloConsumer } from 'react-apollo';\nimport Link from 'next/link';\nimport { Image } from 'cloudinary-react';\nimport cookie from 'cookie';\nimport redirect from '../lib/redirect';\nimport stylesheet from 'styles/topHeader.less';\nimport ChangeAvatarModal from './topHeader/ChangeAvatarModal';\nimport { CLOUD_NAME } from '../constants';\nimport { getCurrentUserOnClient as GET_CURRENT_USER_QUERY } from '../graphql/queries.gql';\n\nconst { Header } = Layout;\n\nclass TopHeader extends React.Component {\n  signout = () => {\n    document.cookie = cookie.serialize('token', '', {\n      maxAge: -1, // Expire the cookie immediately\n    });\n    window.location.replace('/login');\n  };\n\n  render() {\n    return (\n      <ApolloConsumer>\n        {client => {\n          const data = client.readQuery({\n            query: GET_CURRENT_USER_QUERY\n          })\n          const currentUserSync = data.currentUser;\n          const menu = (\n            <Menu className=\"menu-dropdown\">\n              <Menu.Item key=\"user\">\n                <List.Item.Meta\n                  avatar={\n                    <Image\n                      cloudName={CLOUD_NAME}\n                      publicId={currentUserSync.avatar}\n                      width=\"40\"\n                      crop=\"scale\"\n                      style={{ borderRadius: '50%' }}\n                    />\n                  }\n                  title={<a>{currentUserSync.username}</a>}\n                  description={<ChangeAvatarModal currentUserId={currentUserSync.id} />}\n                />\n              </Menu.Item>\n              <Menu.Divider />\n              <Menu.Item key=\"profile\">\n                <Link prefetch as=\"/me/profile\" href=\"/profile\">\n                  <a>\n                    <Icon type=\"profile\" /> Profile\n                  </a>\n                </Link>\n              </Menu.Item>\n              <Menu.Item key=\"logout\">\n                <a onClick={this.signout}>\n                  <Icon type=\"logout\" /> Sign out\n                </a>\n              </Menu.Item>\n            </Menu>\n          );\n\n          return (\n            <Header\n              style={{\n                backgroundColor: 'white',\n                padding: 0,\n              }}\n              className=\"topHeader\"\n            >\n              <style dangerouslySetInnerHTML={{ __html: stylesheet }} />\n              <Dropdown overlay={menu}>\n                <div className=\"ant-dropdown-link user-dropdown\" href=\"#\">\n                  <Image\n                    cloudName={CLOUD_NAME}\n                    publicId={currentUserSync.avatar}\n                    width=\"40\"\n                    crop=\"scale\"\n                    style={{ borderRadius: '50%' }}\n                  />\n                </div>\n              </Dropdown>\n              <div>\n                <Link prefetch href=\"/\">\n                  <a>\n                    <img\n                      src=\"http://sv1.upsieutoc.com/2018/06/14/company_logo.jpg\"\n                      className=\"company-logo\"\n                    />\n                  </a>\n                </Link>\n              </div>\n            </Header>\n          );\n        }}\n      </ApolloConsumer>\n    );\n  }\n}\n\nexport default withApollo(TopHeader);\n\n\n\n// WEBPACK FOOTER //\n// components/topHeader.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AApFA;AAuFA;;;;;A","sourceRoot":""}